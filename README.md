# 2η υποχρεωτική εργασία 2021


### Install

This project requires **Python** and the following Python libraries installed:

- [Pymongo]
- [Flask]
- [json]
- [uuid]
- [time]
- [bson.json_util]
- [bson import ObjectId]
- 


### Κωδικας 

Σε ολα τα function εκτος του create_user():, γινεται ελεγχος του uuid του χρηστη, επισης οπου χρειαζεται ο χρηστης να εισαγει πληροφορια γινεται επαληθευση εαν το αρχειο και η πληροφορια βρισκονται στη σωστη μορφη.Επιπροσθετα εχει προσθεθει σε καθε function μια if οπου ελεγχει εαν η κατηγορια του χρηστη που εχει συνδεθει εχει τη δικαιωδοσια να χρησιμοποιησει τη συγκεκριμενη λειτουργια.

# Extra Function για τον υπολογισμο της αξιας του καλαθιου του χρηστη - def get_cart_items_and_total_value(cart):



# Function 1: Δημιουργία χρήστη - def create_user():
 
Ελεγχος αν το email υπαρχει ηδη μεσα στη βαση δεδομενων. Εφοσον δεν υπαρχει γινεται εισαγωγη των στοιχειων του νεου χρηστη στη βαση δεδομενων μας.


# Function 2: Login στο σύστημα - def login():

Ελεγχος αν το email υπαρχει ηδη μεσα στη βαση δεδομενων. Εφοσον υπαρχει βρισκουμε το password που του αντιστοιχει και το αποθηκευουμε σε μια νεα μεταβλητη , υστερα κανουμε ελεγχο αν το ζευγος που λαβαμε ως εισαγωγη ειναι το ιδιο με το ζευγος που υπαρχει μεσα στη βαση δεδομενων μας. Επειτα δημιουργουμε το uuid  που ανιστοιχει στο email του χρηστη. Επισης δημιουργουμε δυο global μεταβλητες που αποθηκευουμε το email και την κατηγορια του χρηστη.


# Function 3: Διαγραφη του χρηστη απο το σύστημα - def deleteUser():

διαγραφη του χρηστη απο την βαση δεδομενων.

# Function 4: Εισαγωγη αντικειμενου στη βαση δεδομενων των προιοντων - def insertItem():

Στο συγκεκριμενο function δεχομαστε σαν εισαγωγη ολες τις πληροφοριες του αντικειμενου και μονο εφοσον υπαρχουν ολες στη σωστη μορφη η διαδικασια συνεχιζει, εφοσον ολα τα στοιχεια ειναι σωστα τα προσθετουμε σε μια καινουργια μεταβλητη product και υστερα εισαγουμε την μεταβλητη στη βαση δεδομενων Products.

# Function 5: Διαγραφη αντικειμενου απο την βαση δεδομενων των προιοντων - def DeleteItem():
 
Στο συγκεκριμενο function δεχομαστε σαν εισαγωγη το id του αντικειμενου και το διαγραφουμε απο την βαση δεδομενων Products.

# Function 6: Ενημερωση αντικειμενου απο την βαση δεδομενων των προιοντων - def UpdateItem():

Στο συγκεκριμενο function δεχομαστε σαν εισαγωγη το id του αντικειμενου και ενα η περισσοτερα απο τα χαρακτηριστικα του που θελουμε να ενημερωσουμε , εφοσον δεχθουμε πληροφορια για ενα η περισσοτερα χαρακτηριστικα του ενημερωνουμε το προιον .

# Function 7: Αναζητηση αντικειμενου απο την βαση δεδομενων των προιοντων - def search():

Στο συγκεκριμενο function δεχομαστε σαν εισαγωγη μια απο ολες τις πληροφοριες του αντικειμενου εαν βρεθει ενα η περισσοτερα αντικειμενα τα επιστρεφουμε αλλιως επιστρεφουμε οτι δε βρεθηκε αποτελεσμα.

# Function 8: Εισαγωγή αντικειμενου στο καλαθι του χρηστη - def addItem():

Στο συγκεκριμενο function δεχομαστε σαν εισαγωγη το id και την ποσοτητα την οποια θελει να προσθεσει στο καλαθι του ο χρηστης. Εαν δε βρεθει αντικειμενο επιστρεφετε καταλληλο μηνυμα αλλιως γινεται ελεγχος εαν υπαρχει διαθεσιμη η ποσοτητα που θελει να προσθεσει ο χρηστης στο καλαθι του εαν δεν υπαρχει διαθεσιμη ποσοτητα επιστρεφετε μηνυμα με τη διαθεσιμη ποσοτητα για το συγκεκριμενο αντικειμενο. Αν υπαρχει η ποσοτητα που θελει να προσθεσει ο χρηστης στο καλαθι του γινεται δεσμευση της ποσοτητας που προσθεθηκε στο καλαθι του χρηστη.Υστερα δημιουργειτα μια global μεταβλητη cart με key το id του αντικειμενου οπου εχει σαν εισαγωγη τη ποσοτητα του αντικειμενου. Επειτα τα δεδομενα μεταφερονται στο function get_cart_items_and_total_value() οπου γινεται ο υπολογισμος της αξιας του καλαθιου.

# Function 9: Εμφανιση του καλαθιου του χρηση - def showCart():

Στο συγκεκριμενο function παιρνουμε την global μεταβλητη cart αν ειναι None επιστρεφουμε οτι το καλαθι ειναι αδειο αλλιως καλουμε παλι το function get_cart_items_and_total_value() οπου γινεται ο υπολογισμος της αξιας του καλαθιου μαζι με τα αντικειμενα που εχει μεσα.

# Function 10: Διαγραφη αντικειμενου απο το καλαθι του χρηστη - def deleteFromCart()

# Function 11: Αγορα των προιοντων που βρισκονται στο καλαθι του χρηστη - def Purchase(): 

Στο συγκεκριμενο function δεχομαστε την καρτα του χρηστη, και παιρνουμε την global μεταβλητη cart αν η μεταβλητη cart ειναι αδεια εμφανιζουμε μηνυμα οτι το καλαθι ειναι αδειο αλλιως ελεγχουμε εαν η καρτα αποτελειται απο 16 ψηφια εαν δεν αποτελειται απο 16 ψηφια εμφανιζουμε μηνυμα λαθους αλλιως

# Function 12: Εμφανιση των προηγουμενων παραγγελιων του χρηστη - def orderHistory():

Στο συγκεκριμενο function παιρνουμε την global μεταβλητη user_category και κανουμε αναζητηση του χρηστη στη βαση δεδομενω
